# æ™ºèƒ½ç›¸å†Œ (Smart Album) - (åŸºäº Sophgo TPUã€Chinese-CLIP ä¸ Qwen-VL)

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œå¤‡ã€åŸºäº Flask çš„æ™ºèƒ½ç›¸å†Œ Web åº”ç”¨ï¼Œä¸“ä¸ºåœ¨ **Sophgo TPU** ç¡¬ä»¶ä¸Šé«˜æ•ˆè¿è¡Œè€Œè®¾è®¡ã€‚å®ƒå…è®¸ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡ï¼Œå¹¶é€šè¿‡ä¸¤ç§å¼ºå¤§çš„æ–¹å¼è¿›è¡Œæ™ºèƒ½æ£€ç´¢ï¼š**ä¸­æ–‡æ–‡æœ¬æè¿°æœå›¾**å’Œ**ä»¥å›¾æœå›¾**ã€‚

ç³»ç»Ÿæ·±åº¦æ•´åˆäº†ç¡¬ä»¶åŠ é€Ÿçš„ AI æ¨¡å‹ï¼Œåˆ©ç”¨ **Chinese-CLIP** ç”Ÿæˆé«˜è´¨é‡çš„å›¾æ–‡ç‰¹å¾å‘é‡ï¼Œ**BCE (BERT-based Chinese Embedding)** æ¨¡å‹å¢å¼ºæ–‡æœ¬ç†è§£èƒ½åŠ›ï¼Œå¹¶é€šè¿‡ **FAISS** å®ç°æµ·é‡æ•°æ®çš„æ¯«ç§’çº§å‘é‡æ£€ç´¢ã€‚æ­¤å¤–ï¼Œé¡¹ç›®è¿˜é›†æˆäº† **Qwen-VL** å¤§è¯­è¨€æ¨¡å‹çš„äº‘æœåŠ¡ï¼Œèƒ½å¤Ÿå¯¹å›¾ç‰‡è¿›è¡Œæ·±å…¥åˆ†æï¼Œè‡ªåŠ¨ç”Ÿæˆè¯¦ç»†çš„æè¿°å’Œç²¾å‡†çš„å…³é”®è¯ï¼Œä»è€Œæå¤§åœ°æå‡äº†â€œå¢å¼ºæœç´¢â€æ¨¡å¼ä¸‹çš„æ£€ç´¢ç²¾åº¦å’Œç”¨æˆ·ä½“éªŒã€‚æ‰€æœ‰å›¾ç‰‡å…ƒæ•°æ®å’Œ AI åˆ†æç»“æœéƒ½é€šè¿‡ **SQLite3** æ•°æ®åº“è¿›è¡ŒæŒä¹…åŒ–å­˜å‚¨å’Œç®¡ç†ã€‚

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹ (Features)

* **å›¾ç‰‡ä¸Šä¼ ä¸ç®¡ç† (Image Upload & Management)**:
  * æ”¯æŒå•å¼ æˆ–æ‰¹é‡å›¾ç‰‡ä¸Šä¼ ã€‚
  * è‡ªåŠ¨ä¸ºä¸Šä¼ çš„å›¾ç‰‡ç”Ÿæˆç¼©ç•¥å›¾ï¼Œä¼˜åŒ–åŠ è½½é€Ÿåº¦ã€‚
  * æ”¯æŒå¯¹å•å¼ æˆ–å¤šé€‰å›¾ç‰‡è¿›è¡Œæ°¸ä¹…åˆ é™¤ã€‚
  * æ”¯æŒä¸ºå•å¼ æˆ–å¤šé€‰å›¾ç‰‡æ‰¹é‡æ·»åŠ è‡ªå®šä¹‰æ ‡ç­¾ã€‚

* **æ™ºèƒ½æœç´¢ (Intelligent Search)**:
  * **æ–‡æœ¬æœå›¾**: è¾“å…¥ä¸­æ–‡è‡ªç„¶è¯­è¨€æè¿°ï¼Œç³»ç»Ÿèƒ½ç†è§£è¯­ä¹‰å¹¶æ‰¾å‡ºæœ€ç›¸å…³çš„å›¾ç‰‡ã€‚
  * **å›¾åƒæœå›¾**: ä¸Šä¼ ä¸€å¼ å›¾ç‰‡ä½œä¸ºæŸ¥è¯¢ï¼Œç³»ç»Ÿä¼šæ‰¾å‡ºå›¾ç‰‡åº“ä¸­æ‰€æœ‰è§†è§‰ä¸Šç›¸ä¼¼çš„å›¾ç‰‡ã€‚
  * **å¢å¼ºæœç´¢**: å¯åœ¨æ§åˆ¶é¢æ¿ä¸­å¼€å¯/å…³é—­çš„æ··åˆæ£€ç´¢æ¨¡å¼ã€‚å¼€å¯åï¼Œæœç´¢æ—¶ä¼šèåˆå›¾ç‰‡çš„è§†è§‰ç‰¹å¾ï¼ˆCLIPï¼‰å’Œå…¶AIç”Ÿæˆæè¿°çš„æ–‡æœ¬ç‰¹å¾ï¼ˆBCEï¼‰ï¼Œæä¾›æ›´ç²¾å‡†ã€æ›´ç¬¦åˆäººç±»ç›´è§‰çš„æœç´¢ç»“æœã€‚

* **AIå›¾ç‰‡åˆ†æ (AI-Powered Analysis)**:
  * é€šè¿‡é›†æˆ **Qwen-VL** æ¨¡å‹ï¼Œå¯åœ¨å›¾ç‰‡ä¸Šä¼ æ—¶è‡ªåŠ¨æˆ–åœ¨ä¹‹åæ‰‹åŠ¨ä¸ºå›¾ç‰‡ç”Ÿæˆè¯¦ç»†çš„ä¸­æ–‡æè¿°å’Œå…³é”®è¯æ ‡ç­¾ã€‚
  * AIåˆ†æç»“æœä¸ä»…æ–¹ä¾¿ç”¨æˆ·ç†è§£å›¾ç‰‡å†…å®¹ï¼Œè¿˜ä¼šè¢«â€œå¢å¼ºæœç´¢â€æ¨¡å¼åˆ©ç”¨ä»¥æå‡æ£€ç´¢è´¨é‡ã€‚

* **ç”¨æˆ·ç•Œé¢ (User Interface)**:
  * **ä¸»é¡µ**: ç®€æ´çš„ç•Œé¢ï¼Œé›†æˆäº†æ–‡æœ¬å’Œå›¾åƒæœç´¢åŠŸèƒ½ï¼Œå¹¶ä»¥æ— é™æ»šåŠ¨çš„ç€‘å¸ƒæµå½¢å¼å±•ç¤ºæ•´ä¸ªå›¾ç‰‡åº“ã€‚
  * **æ§åˆ¶é¢æ¿**: æä¾›ä¸€ä¸ªç‹¬ç«‹çš„é¡µé¢ï¼Œç”¨äºç®¡ç†åº”ç”¨çš„æ ¸å¿ƒè®¾ç½®ï¼Œå¦‚æ˜¯å¦è‡ªåŠ¨è¿›è¡ŒAIåˆ†æã€æ˜¯å¦å¯ç”¨å¢å¼ºæœç´¢ç­‰ã€‚
  * **å›¾ç‰‡è¯¦æƒ…**: åŒå‡»ä»»æ„å›¾ç‰‡å¯æ‰“å¼€ä¸€ä¸ªæ¨¡æ€æ¡†ï¼Œæ¸…æ™°å±•ç¤ºé«˜æ¸…å¤§å›¾ã€æ–‡ä»¶åã€AIç”Ÿæˆçš„æè¿°ä¸å…³é”®è¯ã€ç”¨æˆ·è‡ªå®šä¹‰æ ‡ç­¾ä»¥åŠæœç´¢æ—¶çš„ç›¸ä¼¼åº¦åˆ†æ•°ã€‚
  * **æ‰¹é‡æ“ä½œ**: ç”¨æˆ·å¯ä»¥æ–¹ä¾¿åœ°ç‚¹å‡»é€‰æ‹©å¤šå¼ å›¾ç‰‡ï¼Œå¯¼èˆªæ ä¸Šä¼šåŠ¨æ€æ˜¾ç¤ºâ€œåˆ é™¤é€‰ä¸­â€å’Œâ€œæ ‡è®°é€‰ä¸­â€æŒ‰é’®ï¼Œä»¥è¿›è¡Œé«˜æ•ˆçš„æ‰¹é‡ç®¡ç†ã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ (Technology Stack)

* **åç«¯ (Backend)**: Python, Flask
* **AI æ¨¡å‹ (AI Models)**:
  * **å›¾æ–‡ç‰¹å¾æå– (Image-Text Features)**: **Chinese-CLIP (ViT-H-14)**ï¼Œä½¿ç”¨ä¸º Sophgo TPU ä¼˜åŒ–çš„ `.bmodel` æ ¼å¼ï¼Œé€šè¿‡ `sophon.sail` API è¿›è¡Œç¡¬ä»¶åŠ é€Ÿæ¨ç†ã€‚
  * **æ–‡æœ¬å‘é‡åŒ– (Text Vectorization)**: **BCE (BERT-based Chinese Embedding)** æ¨¡å‹ (`shibing624/text2vec-base-chinese`)ï¼ŒåŒæ ·ä½¿ç”¨ `.bmodel` æ ¼å¼åœ¨ TPU ä¸Šè¿è¡Œã€‚
  * **å›¾ç‰‡è§†è§‰è¯­è¨€åˆ†æ (Vision-Language Analysis)**: **Qwen-VL**ï¼Œé€šè¿‡ `qwen_service.py` è°ƒç”¨äº‘ç«¯ API å®ç°ã€‚
* **å‘é‡æ•°æ®åº“ (Vector Database)**: FAISS (CPUç‰ˆæœ¬)
* **å…ƒæ•°æ®æ•°æ®åº“ (Metadata DB)**: SQLite3
* **å‰ç«¯ (Frontend)**: åŸç”Ÿ HTML, CSS, JavaScript

## ğŸ“‹ é¡¹ç›®ç»“æ„ (Project Structure)

```
smart-album-tpu/
â”œâ”€â”€ app.py                     # ä¸» Flask åº”ç”¨ï¼ŒåŒ…å«æ‰€æœ‰APIè·¯ç”±å’Œæ ¸å¿ƒé€»è¾‘
â”œâ”€â”€ bce_embedding/             # BCE æ–‡æœ¬å‘é‡åŒ–æ¨¡å— (åŸºäºsophon.sail)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ bce_embedding.py
â”œâ”€â”€ clip/                      # Chinese-CLIP å›¾æ–‡ç‰¹å¾æå–æ¨¡å— (åŸºäºsophon.sail)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ clip.py
â”‚   â””â”€â”€ ...
â”œâ”€â”€ database_utils.py          # SQLite3 æ•°æ®åº“è¾…åŠ©å‡½æ•°
â”œâ”€â”€ faiss_utils.py             # FAISS å‘é‡ç´¢å¼•ç®¡ç†
â”œâ”€â”€ qwen_service.py            # Qwen-VL å›¾ç‰‡åˆ†ææœåŠ¡ (è°ƒç”¨äº‘API)
â”œâ”€â”€ requirements.txt           # Python ä¾èµ–åŒ…
â”œâ”€â”€ static/                    # å‰ç«¯é™æ€æ–‡ä»¶ (CSS, JS, images)
â”œâ”€â”€ templates/                 # HTML æ¨¡æ¿ (index.html, controls.html)
â”œâ”€â”€ models/                    # å­˜æ”¾ç¼–è¯‘å¥½çš„ .bmodel æ–‡ä»¶å’Œ tokenizer é…ç½®
â”‚   â”œâ”€â”€ BM1684X/               # ç¤ºä¾‹ç¡¬ä»¶å¹³å°ç›®å½•
â”‚   â”‚   â”œâ”€â”€ cn_clip_image_...bmodel
â”‚   â”‚   â”œâ”€â”€ cn_clip_text_...bmodel
â”‚   â”‚   â””â”€â”€ text2vec_base_...bmodel
â”‚   â””â”€â”€ shibing624/            # Tokenizer é…ç½®æ–‡ä»¶ç›®å½•
â”œâ”€â”€ data/                      # è¿è¡Œæ—¶ç”Ÿæˆçš„æ•°æ®æ–‡ä»¶
â”‚   â”œâ”€â”€ smart_album.db         # SQLite æ•°æ®åº“æ–‡ä»¶
â”‚   â”œâ”€â”€ album_faiss.index      # FAISS ç´¢å¼•æ–‡ä»¶
â”‚   â””â”€â”€ app_config.json        # åº”ç”¨é…ç½®æ–‡ä»¶
â”œâ”€â”€ uploads/                   # ç”¨æˆ·ä¸Šä¼ çš„åŸå§‹å›¾ç‰‡ (è¿è¡Œæ—¶åˆ›å»º)
â””â”€â”€ thumbnails/                # ç”Ÿæˆçš„ç¼©ç•¥å›¾ (è¿è¡Œæ—¶åˆ›å»º)
```

## ğŸš€ ç¯å¢ƒå‡†å¤‡ä¸è¿è¡Œ

### 1. ç¡¬ä»¶ä¸è½¯ä»¶ç¯å¢ƒ
* **ç¡¬ä»¶**: æœ¬é¡¹ç›®ä¸“ä¸º **Sophgo TPU** (å¦‚ BM1684X ç³»åˆ—) è®¾è®¡ï¼Œå…¶æ€§èƒ½ä¾èµ–äº TPU çš„ç¡¬ä»¶åŠ é€Ÿèƒ½åŠ›ã€‚
* **Python**: å»ºè®®ä½¿ç”¨ Python 3.9 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚
* **Sophon SDK**: è¯·ç¡®ä¿æ‚¨å·²åœ¨æ‚¨çš„ç¡¬ä»¶å¹³å°ä¸Šæ­£ç¡®å®‰è£…äº† Sophgo SDKï¼Œå¹¶é…ç½®å¥½äº† `sophon.sail` Python åº“çš„è¿è¡Œç¯å¢ƒã€‚

### 2. å®‰è£…ä¾èµ–
å…‹éš†é¡¹ç›®åï¼Œå»ºè®®åœ¨ Python è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…æ‰€æœ‰å¿…éœ€çš„ä¾èµ–åŒ…ã€‚
```bash
# åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate  # Linux/macOS
# venv\Scripts\activate    # Windows

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### 3. æ¨¡å‹æ–‡ä»¶å‡†å¤‡
* æœ¬é¡¹ç›®éœ€è¦ä½¿ç”¨ä¸º Sophgo TPU ç¼–è¯‘çš„ `.bmodel` æ–‡ä»¶ã€‚è¯·å°†æ‚¨çš„ `cn_clip` (image å’Œ text) å’Œ `bce` æ¨¡å‹çš„ `.bmodel` æ–‡ä»¶æ”¾ç½®åœ¨ `models/BM1684X/` ç›®å½•ä¸‹ï¼ˆæˆ–æ ¹æ®æ‚¨çš„ç¡¬ä»¶ä¿®æ”¹ `app.py` ä¸­çš„å¯åŠ¨å‚æ•°è·¯å¾„ï¼‰ã€‚
* ç¡®ä¿ `models/shibing624/text2vec-base-chinese` ç›®å½•ä¸­åŒ…å« BCE æ¨¡å‹æ‰€éœ€çš„ `tokenizer` ç›¸å…³é…ç½®æ–‡ä»¶ã€‚

### 4. Qwen-VL API é…ç½®
* æ‰“å¼€ `qwen_service.py` æ–‡ä»¶ã€‚
* åœ¨æ–‡ä»¶é¡¶éƒ¨æ‰¾åˆ°å¹¶ä¿®æ”¹ `QWEN_API_KEY` å’Œ `QWEN_BASE_URL` ä¸ºæ‚¨çš„ Qwen-VL æœåŠ¡å‡­è¯ã€‚
* **å®‰å…¨æç¤º**: å¼ºçƒˆå»ºè®®é€šè¿‡ç¯å¢ƒå˜é‡ (`export QWEN_API_KEY="your_key"`) æ¥è®¾ç½® API å¯†é’¥ï¼Œè€Œä¸æ˜¯ç›´æ¥ç¡¬ç¼–ç åœ¨ä»£ç ä¸­ã€‚

### 5. è¿è¡Œé¡¹ç›®
åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨åç«¯æœåŠ¡ã€‚æ‚¨å¿…é¡»é€šè¿‡å‘½ä»¤è¡Œå‚æ•°æŒ‡å®šæ¨¡å‹æ–‡ä»¶çš„è·¯å¾„å’Œè¦ä½¿ç”¨çš„ TPU è®¾å¤‡ IDã€‚
```bash
python app.py \
  --image_model './models/BM1684X/cn_clip_image_vit_h_14_bm1684x_f16_1b.bmodel' \
  --text_model './models/BM1684X/cn_clip_text_vit_h_14_bm1684x_f16_1b.bmodel' \
  --bce_model './models/BM1684X/text2vec_base_chinese_bm1684x_f16_1b.bmodel' \
  --dev_id 0
```
* `--dev_id`: æŒ‡å®šè¦ä½¿ç”¨çš„ TPU è®¾å¤‡ ID (ä¾‹å¦‚ï¼Œ0, 1, ...)ã€‚

æœåŠ¡é»˜è®¤ä¼šåœ¨ `http://0.0.0.0:5000` å¯åŠ¨ã€‚åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ `http://localhost:5000` å³å¯å¼€å§‹ä½¿ç”¨ã€‚

---

## ğŸ“‘ API æ¥å£æ–‡æ¡£

ä»¥ä¸‹æ˜¯é¡¹ç›®åç«¯æä¾›çš„APIæ¥å£è¯¦ç»†è¯´æ˜ã€‚

### 1. å›¾ç‰‡ä¸Šä¼ 
* **URL**: `/upload_images`
* **æ–¹æ³•**: `POST`
* **è¯·æ±‚ä½“**: `multipart/form-data`
  * `files`: ä¸€ä¸ªæˆ–å¤šä¸ªå›¾ç‰‡æ–‡ä»¶ã€‚
* **æˆåŠŸå“åº” (200)**:
  ```json
  {
    "message": "æˆåŠŸå¤„ç† X å¼ å›¾ç‰‡ï¼Œå¤±è´¥ Y å¼ ã€‚",
    "processed_files": [
      {"id": 1, "faiss_id": 1, "filename": "example.jpg", "status": "success"}
    ]
  }
  ```
* **å¤±è´¥å“åº” (400, 500)**:
  ```json
  {"error": "é”™è¯¯ä¿¡æ¯"}
  ```

### 2. æ–‡æœ¬æœç´¢å›¾ç‰‡
* **URL**: `/search_images`
* **æ–¹æ³•**: `POST`
* **è¯·æ±‚ä½“**: `application/json`
  ```json
  {
    "query_text": "è“è‰²çš„å¤©ç©ºå’Œç™½äº‘",
    "top_k": 200
  }
  ```
* **æˆåŠŸå“åº” (200)**:
  ```json
  {
    "query": "è“è‰²çš„å¤©ç©ºå’Œç™½äº‘",
    "results": [
      {
        "id": 1,
        "faiss_id": 1,
        "filename": "sky.jpg",
        "thumbnail_url": "/thumbnails/uuid_thumb.jpg",
        "original_url": "/uploads/uuid.jpg",
        "similarity": 0.8765,
        "qwen_description": "å›¾ç‰‡æ...",
        "qwen_keywords": ["å¤©ç©º", "äº‘"],
        "user_tags": ["é£æ™¯"],
        "is_enhanced": true
      }
    ],
    "search_mode_is_enhanced": true
  }
  ```

### 3. å›¾åƒæœç´¢å›¾ç‰‡
* **URL**: `/search_by_uploaded_image`
* **æ–¹æ³•**: `POST`
* **è¯·æ±‚ä½“**: `multipart/form-data`
  * `image_query_file`: ä¸€å¼ ç”¨ä½œæŸ¥è¯¢çš„å›¾ç‰‡æ–‡ä»¶ã€‚
* **æˆåŠŸå“åº” (200)**: å“åº”ç»“æ„ä¸æ–‡æœ¬æœç´¢ç±»ä¼¼ï¼Œä½† `similarity` æ˜¯çº¯ç²¹çš„CLIPå›¾åƒå‘é‡ä½™å¼¦ç›¸ä¼¼åº¦ã€‚
  ```json
  {
    "query_filename": "my_cat.jpg",
    "results": [ /* ... */ ],
    "search_mode_is_enhanced": false
  }
  ```

### 4. è·å–æ‰€æœ‰å›¾ç‰‡ï¼ˆåˆ†é¡µï¼‰
* **URL**: `/images`
* **æ–¹æ³•**: `GET`
* **æŸ¥è¯¢å‚æ•°**:
  * `page`: é¡µç  (é»˜è®¤ 1)
  * `limit`: æ¯é¡µæ•°é‡ (é»˜è®¤ 40)
* **æˆåŠŸå“åº” (200)**:
  ```json
  {
    "images": [
      {
        "id": 1,
        "filename": "example.jpg",
        "thumbnail_url": "/thumbnails/xxx_thumb.jpg",
        "original_url": "/uploads/xxx.jpg",
        "is_enhanced": true,
        "user_tags": ["æ ‡ç­¾1"]
      }
    ],
    "total_count": 100,
    "page": 1,
    "limit": 40,
    "total_pages": 3
  }
  ```

### 5. è·å–å•å¼ å›¾ç‰‡è¯¦æƒ…
* **URL**: `/image_details/<image_db_id>`
* **æ–¹æ³•**: `GET`
* **æˆåŠŸå“åº” (200)**:
  ```json
  {
    "id": 1,
    "filename": "example.jpg",
    "original_url": "/uploads/xxx.jpg",
    "qwen_description": "å›¾ç‰‡æè¿°",
    "qwen_keywords": ["å…³é”®è¯1", "å…³é”®è¯2"],
    "user_tags": ["æ ‡ç­¾1", "æ ‡ç­¾2"],
    "is_enhanced": true
  }
  ```

### 6. æ‰‹åŠ¨è§¦å‘å›¾ç‰‡å¢å¼ºåˆ†æ
* **URL**: `/enhance_image/<image_db_id>`
* **æ–¹æ³•**: `POST`
* **æˆåŠŸå“åº” (200)**:
  ```json
  {
    "message": "å›¾ç‰‡ ID X åˆ†æå¢å¼ºæˆåŠŸã€‚",
    "qwen_description": "æ–°ç”Ÿæˆçš„å›¾ç‰‡æè¿°",
    "qwen_keywords": ["æ–°å…³é”®è¯1", "æ–°å…³é”®è¯2"],
    "is_enhanced": true
  }
  ```

### 7. æ‰¹é‡åˆ é™¤å›¾ç‰‡
* **URL**: `/delete_images_batch`
* **æ–¹æ³•**: `POST`
* **è¯·æ±‚ä½“**: `application/json`
  ```json
  {"image_ids": [1, 2, 3]}
  ```
* **æˆåŠŸå“åº” (200)**:
  ```json
  {
    "success": true,
    "message": "æˆåŠŸåˆ é™¤ X å¼ å›¾ç‰‡ã€‚",
    "failed_ids": []
  }
  ```

### 8. æ‰¹é‡æ·»åŠ ç”¨æˆ·æ ‡ç­¾
* **URL**: `/add_user_tags_batch`
* **æ–¹æ³•**: `POST`
* **è¯·æ±‚ä½“**: `application/json`
  ```json
  {
    "image_ids": [1, 2, 3],
    "user_tags": ["é£æ™¯", "å®¶åº­"]
  }
  ```
* **æˆåŠŸå“åº” (200)**:
  ```json
  {
    "success": true,
    "message": "æˆåŠŸä¸º X å¼ å›¾ç‰‡æ·»åŠ /æ›´æ–°äº†ç”¨æˆ·æ ‡ç­¾ã€‚",
    "failed_ids": []
  }
  ```

### 9. åº”ç”¨è®¾ç½®ç®¡ç†
* **URL**: `/config/settings`
* **æ–¹æ³•**: `GET` (è·å–å½“å‰è®¾ç½®), `POST` (æ›´æ–°è®¾ç½®)
* **è¯·æ±‚ä½“ (POST)**: `application/json`
  ```json
  {
    "qwen_vl_analysis_enabled": true,
    "use_enhanced_search": false
  }
  ```
* **å“åº” (GET/POST)**:
  ```json
  {
    "qwen_vl_analysis_enabled": true,
    "use_enhanced_search": false
  }
  